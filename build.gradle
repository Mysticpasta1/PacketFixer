println('Java: ' + System.getProperty('java.version') + ' JVM: ' + System.getProperty('java.vm.version') + '(' + System.getProperty('java.vendor') + ') Arch: ' + System.getProperty('os.arch'))

allprojects {
    apply plugin: 'maven-publish'
    apply plugin: 'eclipse'
}

subprojects {
    apply plugin: 'net.minecraftforge.gradle'
    apply plugin: 'org.parchmentmc.librarian.forgegradle'
    apply plugin: 'org.spongepowered.mixin'

    group = 'PacketSizeDoublerForge'
    version = "1.0.2-${minecraft_version}"
    archivesBaseName = 'PacketSizeDoublerForge'

    mixin {
        config "packetsizedoublerforge.mixins.json"
        add sourceSets.main, "packetsizedoublerforge.refmap.json"
        disableEclipseAddon = true
        debug.export = true
    }

    dependencies {
        annotationProcessor "org.spongepowered:mixin:0.8.5:processor"
    }

    sourceSets.main.resources { srcDir 'src/generated/resources' }

    jar {
        manifest {
            attributes([
                    "Specification-Title"     : "PacketSizeDoublerForge",
                    "Specification-Vendor"    : "TonimatasDEV",
                    "Specification-Version"   : "1",
                    "Implementation-Title"    : project.name,
                    "Implementation-Version"  : project.jar.archiveVersion,
                    "Implementation-Vendor"   : "TonimatasDEV",
                    "Implementation-Timestamp": new Date().format("yyyy-MM-dd'T'HH:mm:ssZ")
            ])
        }
    }
}

task exportAll {
    dependsOn(":1.16.x:jar")
    dependsOn(":1.17.x:jar")
    dependsOn(":1.18.x:jar")
    dependsOn(":1.19.x:jar")
}

task buildAll {
    dependsOn(":1.16.x:build")
    dependsOn(":1.17.x:build")
    dependsOn(":1.18.x:build")
    dependsOn(":1.19.x:build")
}

task cleanAll {
    dependsOn(":1.16.x:clean")
    dependsOn(":1.17.x:clean")
    dependsOn(":1.18.x:clean")
    dependsOn(":1.19.x:clean")
}
